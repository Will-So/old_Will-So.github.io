<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
    <title>Analytical Sense | sqlite3</title>
    <link rel="shortcut icon" type="image/png" href="http://will-so.github.io/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="http://will-so.github.io/favicon.ico">
    <link href="http://will-so.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Analytical Sense Full Atom Feed" />
    <link href="http://will-so.github.io/feeds/none.atom.xml" type="application/atom+xml" rel="alternate" title="Analytical Sense Categories Atom Feed" />
    <link rel="stylesheet" href="http://will-so.github.io/theme/css/screen.css" type="text/css" />
    <link rel="stylesheet" href="http://will-so.github.io/theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://will-so.github.io/theme/css/print.css" type="text/css" media="print" />
    <meta name="generator" content="Pelican" />

    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>
    <!-- Added for the MathJax thing -->
    <script type="text/javascript">
    init_mathjax = function() {
        if (window.MathJax) {
            // MathJax loaded
            MathJax.Hub.Config({
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
                },
                displayAlign: 'left', // Change this to 'center' to center equations.
                "HTML-CSS": {
                    styles: {'.MathJax_Display': {"margin": 0}}
                }
            });
            MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
        }
    }
    init_mathjax();
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

    <script type="text/javascript">
    jQuery(document).ready(function($) {
        $("div.collapseheader").click(function () {
        $header = $(this).children("span").first();
        $codearea = $(this).children(".input_area");
        console.log($(this).children());
        $codearea.slideToggle(500, function () {
            $header.text(function () {
                return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
            });
        });
    });
    });
    </script>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67989600-1', 'auto');
  ga('send', 'pageview');

</script>


    <meta name="keywords" content="('*Nix','CLI')" />
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="http://will-so.github.io">Home</a></li>
                <li><a href="http://will-so.github.io/pages/about.html">About</a></li>
                <li><a href="http://will-so.github.io/pages/data-projects.html">Data Projects</a></li>
                <li><a href="http://will-so.github.io/pages/glossary.html">Glossary</a></li>
                <li><a href="https://github.com/Will-So/">GitHub</a></li>
                <li><a href="http://will-so.github.io/tags">Tags</a></li>
                <li><a href="http://will-so.github.io/archives">Archives</a></li>
            </ul>
        </nav>
        <div class="header_box">
            <h1><a href="http://will-so.github.io">Analytical Sense</a></h1>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Jul 25, 2015</h4>

            <article class="post">
                <h2 class="title">
                    <a href="http://will-so.github.io/blog/sqlite3.html" rel="bookmark" title="Permanent Link to &quot;sqlite3&quot;">sqlite3</a>
                </h2>

                <p>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="What-is-sqlite3-good-for?">What is sqlite3 good for?<a class="anchor-link" href="#What-is-sqlite3-good-for?">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Using the <code>sqlite3</code> CLI can often be a good alternative to python-based solutions when the operations we are performing is easy to express directly with SQL.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="How-does-it-work?">How does it work?<a class="anchor-link" href="#How-does-it-work?">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>Commands like <code>.tables</code> are prefixed with a dot. </li>
<li>SQL statements <code>select * from AllstarFull</code> end with a semicolon</li>
</ol>
<p>Useful commands are:</p>
<ol>
<li><code>.tables</code>: Shows all tables in the db.</li>
<li><code>.timer ON</code>: times how long an operation takes between <code>.timer ON</code> and <code>.timer OFF</code></li>
<li><code>.schema</code> shows the schema of all the tables in the db</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Cookbook">Cookbook<a class="anchor-link" href="#Cookbook">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can dump files to csv via the following syntax</p>
<div class="highlight"><pre><span class="p">.</span><span class="k">mode</span> <span class="n">CSV</span>
<span class="p">.</span><span class="n">headers</span> <span class="k">on</span>
<span class="p">.</span><span class="k">output</span> <span class="k">table</span><span class="p">.</span><span class="n">csv</span>
</pre></div>
<p>We can run an SQL script from the command line using the following syntax</p>
<p><code>sqlite3 database.db &lt; sql_script.sql</code></p>
<p>After dropping a table, you may have to use <code>VACUUM;</code> to reclaim the space that the dropped table was using.</p>
<h2 id="Dealing-with-Database-or-Disk-is-Full">Dealing with Database or Disk is Full<a class="anchor-link" href="#Dealing-with-Database-or-Disk-is-Full">&#182;</a></h2><p>When dealing with tables that are large compared to the space on disk it's possible to get an error that says: <code>Error: near line 41: database or disk is full</code> even though the disk isn't full and even though the database is far smaller than the 120TB size limit.</p>
<p>This could be because either 1) the temporary file directory is filling up or 2) the database is corrupted.</p>
<p>In the case of (1), the solution is either to tell SQLite to put everything in ram via <code>sqlite&gt; prgrama temp_store = 2;</code>. If you don't have enough ran for the operation, you can change the temporary directory with the following code:</p>

<pre><code>sqlite&gt; pragma temp_store = 1;
sqlite&gt; pragma temp_store_directory = '/spacious/hdd/data';</code></pre>
<p>In the case of (2) hope is still not lost. Search the internet for ways to repair a corrupt SQLite database.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="When-to-use-SQLITE">When to use SQLITE<a class="anchor-link" href="#When-to-use-SQLITE">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SQLite is much easier to work with than other RBDMS because it is serverless, requires few external libraries, and requires no configuration.</p>
<p>I think of SQLite as being the Python of databases. If you are using an RBDMS for a project, you should have a good reason not to use SQLite. On websites it can handle 100k hits/day with ease and <a href="https://www.sqlite.org/whentouse.html">500k is probably a more realistic upper bound</a>.</p>
<p>The <code>SQLite</code> <a href="https://www.sqlite.org/whentouse.html">website</a> offers a few cases when SQLite probably is not the best choice.</p>
<ol>
<li>If your DB is so big that it can't fit on a single disk, then you probably need something else.</li>
<li>Websites with very high write volumes</li>
<li>Multiple uers need to write to a db simultaneously. </li>
<li>You aren't storing your RBDMS on the same hard drive as your app.</li>
</ol>

</div>
</div>
</div></p>
                <div class="clear"></div>

                <div class="info">
                    <a href="http://will-so.github.io/blog/sqlite3.html">posted at 00:00</a>
                    &nbsp;&middot;&nbsp;<a href="http://will-so.github.io/category/none.html" rel="tag">None</a>
                    &nbsp;&middot;
                    &nbsp;<a href="http://will-so.github.io/tags/nix.html" class="tags">('*Nix'</a>
                    &nbsp;<a href="http://will-so.github.io/tags/cli.html" class="tags">'CLI')</a>
                </div>
            </article>
            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/jody-frankowski/blue-penguin">Blue Penguin</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
                &middot;
                <a href="http://will-so.github.io/feeds/all.atom.xml" rel="alternate">Atom Feed</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>

